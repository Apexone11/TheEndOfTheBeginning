<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="gameproject.MainControllerNew"
      styleClass="root" stylesheets="@game-style.css" spacing="15.0">
   <padding>
      <Insets bottom="20.0" left="20.0" right="20.0" top="20.0" />
   </padding>
   
   <!-- Game Title -->
   <Label text="⚔ The End The Beginning ⚔" textAlignment="CENTER" styleClass="title-label">
      <font>
         <Font name="System Bold" size="28.0" />
      </font>
   </Label>
   
   <!-- Subtitle -->
   <Label text="~ Dungeon Escape RPG ~" textAlignment="CENTER" style="-fx-text-fill: #cccccc; -fx-font-size: 16px; -fx-font-style: italic;">
      <VBox.margin>
         <Insets top="-10.0" bottom="10.0" />
      </VBox.margin>
   </Label>
   
   <!-- Main Game Display Area -->
   <ScrollPane prefHeight="400.0" prefWidth="760.0" fitToWidth="true" styleClass="game-scroll-pane">
      <content>
         <TextArea fx:id="gameTextArea" editable="false" wrapText="true" styleClass="game-text-area"
                   promptText="Welcome, brave adventurer! Your journey begins here..."
                   prefRowCount="20" prefColumnCount="80" />
      </content>
   </ScrollPane>
   
   <!-- Enhanced Player Statistics Panel with Progress Bars -->
   <VBox spacing="10.0" styleClass="stats-panel">
      <VBox.margin>
         <Insets top="5.0" bottom="5.0" />
      </VBox.margin>
      
      <!-- Primary Stats Row -->
      <HBox spacing="20.0" alignment="CENTER_LEFT">
         <Label text="📊 Player Stats:" styleClass="stat-label" style="-fx-font-weight: bold; -fx-font-size: 14px;" />
         
         <Separator orientation="VERTICAL" />
         
         <HBox spacing="15.0">
            <Label fx:id="healthLabel" text="❤ Health: 100" styleClass="health-stat" />
            <Label fx:id="manaLabel" text="💙 Mana: 50" styleClass="mana-stat" />
            <Label fx:id="defenseLabel" text="🛡 Defense: 1" styleClass="stat-value" />
            <Label fx:id="attackLabel" text="⚔ Attack: 1" styleClass="stat-value" />
            <Label fx:id="levelLabel" text="📈 Level: 1" styleClass="stat-value" />
         </HBox>
      </HBox>
      
      <!-- Progress Bars Row -->
      <HBox spacing="20.0" alignment="CENTER_LEFT">
         <VBox spacing="3.0">
            <Label text="Health" style="-fx-font-size: 10px; -fx-text-fill: #cccccc;" />
            <ProgressBar fx:id="healthProgressBar" prefWidth="120.0" styleClass="health-progress" progress="1.0" />
         </VBox>
         
         <VBox spacing="3.0">
            <Label text="Mana" style="-fx-font-size: 10px; -fx-text-fill: #cccccc;" />
            <ProgressBar fx:id="manaProgressBar" prefWidth="120.0" styleClass="mana-progress" progress="1.0" />
         </VBox>
         
         <VBox spacing="3.0">
            <Label text="Experience" style="-fx-font-size: 10px; -fx-text-fill: #cccccc;" />
            <ProgressBar fx:id="experienceProgressBar" prefWidth="120.0" styleClass="exp-progress" progress="0.0" />
         </VBox>
         
         <!-- Advanced Stats -->
         <Separator orientation="VERTICAL" />
         
         <HBox spacing="10.0">
            <Label fx:id="agilityLabel" text="⚡ Agility: 10" styleClass="stat-value" style="-fx-font-size: 11px;" />
            <Label fx:id="luckLabel" text="🍀 Luck: 5" styleClass="stat-value" style="-fx-font-size: 11px;" />
            <Label fx:id="accuracyLabel" text="🎯 Accuracy: 85%" styleClass="stat-value" style="-fx-font-size: 11px;" />
         </HBox>
      </HBox>
      
      <!-- Status Effects Display -->
      <HBox fx:id="statusEffectsContainer" spacing="5.0" alignment="CENTER_LEFT" 
            style="-fx-background-color: rgba(0,0,0,0.3); -fx-background-radius: 5px; -fx-padding: 5px;"
            visible="false" managed="false">
         <Label text="🔮 Active Effects:" style="-fx-font-size: 11px; -fx-font-weight: bold;" />
         <ScrollPane fx:id="statusEffectsScrollPane" prefHeight="25.0" hbarPolicy="AS_NEEDED" vbarPolicy="NEVER" 
                     fitToHeight="true" style="-fx-background: transparent;">
            <HBox fx:id="statusEffectsList" spacing="3.0" alignment="CENTER_LEFT" />
         </ScrollPane>
      </HBox>
   </VBox>
   
   <!-- Input Section -->
   <HBox spacing="10.0" styleClass="input-section" alignment="CENTER_LEFT">
      <VBox.margin>
         <Insets top="5.0" />
      </VBox.margin>
      
      <Label text="💬 Your Command:" styleClass="stat-label" />
      <TextField fx:id="inputField" prefWidth="500.0" styleClass="game-input"
                 promptText="Enter your choice or command here..." />
      <Button fx:id="submitButton" onAction="#handleSubmit" text="➤ Submit" styleClass="submit-button" />
   </HBox>
   
   <!-- Achievement Notification Area -->
   <HBox fx:id="achievementNotificationArea" spacing="10.0" alignment="CENTER" 
         style="-fx-background-color: linear-gradient(to right, #FFD700, #FFA500); -fx-background-radius: 10px; -fx-padding: 10px; -fx-border-color: #FFD700; -fx-border-width: 2px; -fx-border-radius: 10px;"
         visible="false" managed="false">
      <VBox.margin>
         <Insets top="5.0" bottom="5.0" />
      </VBox.margin>
      
      <Label text="🏆" style="-fx-font-size: 20px;" />
      <VBox spacing="2.0">
         <Label text="ACHIEVEMENT UNLOCKED!" style="-fx-font-weight: bold; -fx-font-size: 12px; -fx-text-fill: #8B4513;" />
         <Label fx:id="achievementNameLabel" text="Achievement Name" style="-fx-font-size: 14px; -fx-text-fill: #8B4513; -fx-font-weight: bold;" />
         <Label fx:id="achievementDescLabel" text="Achievement description" style="-fx-font-size: 11px; -fx-text-fill: #8B4513;" />
      </VBox>
      <Button fx:id="dismissAchievementButton" text="✕" onAction="#dismissAchievement" 
              style="-fx-background-color: transparent; -fx-text-fill: #8B4513; -fx-font-weight: bold;" />
   </HBox>
   
   <!-- Combat Action Buttons (Hidden by default) -->
   <HBox fx:id="combatButtonsArea" spacing="10.0" alignment="CENTER" 
         visible="false" managed="false">
      <VBox.margin>
         <Insets top="5.0" bottom="5.0" />
      </VBox.margin>
      
      <Button fx:id="normalAttackButton" text="🗡️ Attack" styleClass="combat-button" 
              onAction="#performNormalAttack" prefWidth="100.0">
         <tooltip><Tooltip text="Standard attack with balanced damage" /></tooltip>
      </Button>
      
      <Button fx:id="defendButton" text="🛡️ Defend" styleClass="combat-button" 
              onAction="#performDefend" prefWidth="100.0">
         <tooltip><Tooltip text="Reduce incoming damage this turn" /></tooltip>
      </Button>
      
      <Button fx:id="heavyAttackButton" text="⚡ Heavy" styleClass="combat-button" 
              onAction="#performHeavyAttack" prefWidth="100.0">
         <tooltip><Tooltip text="High damage attack (costs mana)" /></tooltip>
      </Button>
      
      <Button fx:id="quickAttackButton" text="🏹 Quick" styleClass="combat-button" 
              onAction="#performQuickAttack" prefWidth="100.0">
         <tooltip><Tooltip text="Fast but weaker attack" /></tooltip>
      </Button>
      
      <Button fx:id="useItemButton" text="🧪 Item" styleClass="combat-button" 
              onAction="#useItemInCombat" prefWidth="100.0">
         <tooltip><Tooltip text="Use an item from inventory" /></tooltip>
      </Button>
      
      <Button fx:id="runButton" text="🏃 Run" styleClass="combat-button" 
              onAction="#attemptToRun" prefWidth="100.0">
         <tooltip><Tooltip text="Try to escape from combat" /></tooltip>
      </Button>
   </HBox>
   
   <!-- Control Buttons -->
   <HBox spacing="15.0" styleClass="button-row" alignment="CENTER">
      <VBox.margin>
         <Insets top="10.0" />
      </VBox.margin>
      
      <Button fx:id="startButton" onAction="#handleStart" text="🎮 Start New Game" styleClass="start-button">
         <tooltip>
            <Tooltip text="Begin a fresh adventure in the dungeon" />
         </tooltip>
      </Button>
      
      <Button fx:id="statsButton" onAction="#handleStats" text="📋 View Stats" styleClass="stats-button">
         <tooltip>
            <Tooltip text="Display detailed character information" />
         </tooltip>
      </Button>
      
      <Button fx:id="achievementsButton" onAction="#showAchievements" text="🏆 Achievements" styleClass="achievements-button">
         <tooltip>
            <Tooltip text="View unlocked achievements and progress" />
         </tooltip>
      </Button>
      
      <Button fx:id="resetButton" onAction="#handleReset" text="🔄 Reset Game" styleClass="reset-button">
         <tooltip>
            <Tooltip text="Reset the game to starting conditions" />
         </tooltip>
      </Button>
   </HBox>
   
   <!-- Footer with Version Info -->
   <HBox alignment="CENTER" spacing="10.0">
      <VBox.margin>
         <Insets top="20.0" />
      </VBox.margin>
      
      <Separator prefWidth="100.0" />
      <Label text="v4.0.0 - Advanced Combat Edition | Created by Abdul Fornah | JavaFX RPG" 
             style="-fx-text-fill: #888888; -fx-font-size: 11px; -fx-font-style: italic;" />
      <Separator prefWidth="100.0" />
   </HBox>
</VBox>